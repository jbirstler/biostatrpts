source("/ua/hetzel/Rsource/biostatrpts2016/biostatrpts/R/uwBar.R")
source("/ua/hetzel/Rsource/biostatrpts2016/biostatrpts/R/uwBarPlot.R")
source("/ua/hetzel/Rsource/biostatrpts2016/biostatrpts/R/rounds.R")
source("/ua/hetzel/Rsource/biostatrpts2016/biostatrpts/R/figureBox.R")
source("/ua/hetzel/Rsource/biostatrpts2016/biostatrpts/R/uwPVals.R")
pkgname <- "biostatrpts"
source(file.path(R.home("share"), "R", "examples-header.R"))
options(warn = 1)
library('biostatrpts')
base::assign(".oldSearch", base::search(), pos = 'CheckExEnv')
base::assign(".old_wd", base::getwd(), pos = 'CheckExEnv')
cleanEx()
nameEx("beginSweaveFile")
set.seed(784)
outcome <- factor(sample(c("No","Yes"),replace=TRUE,size=20))
group <- factor(rep(c("A","B"),each=10))
d.frame <- data.frame(outcome,group)

chisqFunc(d.frame,"outcome","group",fisher=TRUE)
cleanEx()
nameEx("compSweave")
ID <- rep(letters[1:20], 3)
TRT <- rep(c("A","B"), 30)
Time <- c(rep("Baseline",20),rep("Week 5",20),rep("Week 10",20))
Time <- ordered(Time, c("Baseline", "Week 5", "Week 10"))
AE <- sample(c(1,2,3,4),60,replace=TRUE)
  
data2 <- data.frame(ID,TRT,Time,AE)

diffFunction(Diffdata=data2,
             variable="AE",
             TrxName="TRT",
             VisitName="Time",
             Baseline="Baseline",
             ptID="ID",
             deltaPct=TRUE)




cleanEx()
nameEx("inputTex")
Dates <- c("03/01/2008","09/01/2007","07/01/2007","12/01/2006","08/01/2007","08/01/2007",
"04/01/2007","04/01/2007","04/01/2007","11/01/2006","11/01/2006","12/01/2006",
"12/01/2006","10/01/2006","01/01/2007","11/01/2006","12/01/2006","02/01/2007",
"08/01/2007","08/01/2006","09/01/2006","04/01/2007","05/01/2007","11/01/2006",
"10/01/2006","03/01/2007","10/01/2007","07/01/2007","03/01/2007","05/01/2006",
"05/01/2006","11/01/2006","12/01/2006","02/01/2007","02/01/2007","02/01/2007",
"04/01/2007","05/01/2007","07/01/2007","08/01/2007","11/01/2007","10/01/2007",
"09/01/2007","10/01/2007","05/01/2007","01/01/2008","12/01/2006","02/01/2007",
"03/01/2007","04/01/2007","04/01/2007","05/01/2007","07/01/2007","02/01/2007",
"07/01/2007","10/01/2007","01/01/2008")

library(chron)
Date <- chron(Dates, format=c(dates="m/d/y"))
TRT <- rep(c("A","B"), c(30,27))

data <- data.frame(Date, TRT)

layout(matrix(c(1,2,3,4),nrow=2,byrow=TRUE))
uwAccrualBars(accData=data,dateName="Date",trxName=NULL,pTitle="Accural",
              yLab="Months",xLab="Number of Patients",
              interval="m",yLim=NULL,pHoriz=TRUE,pBeside=TRUE,
              linedbars=FALSE,Legend=TRUE,LegendLoc="right",
              LegendCex=0.5,cex.names=0.7,barNamesLas=1)

uwAccrualBars(accData=data,dateName="Date",trxName=NULL,pTitle="Test",
              yLab="Number of Patients",xLab="Day",startDate="01/01/2005",currentDate="12/31/2010",
              interval="d",yLim=NULL,pHoriz=FALSE,pBeside=TRUE,
              linedbars=TRUE,Legend=FALSE,LegendLoc="topleft",
              LegendCex=0.6,cex.names=0.8,barNamesSeq=40)

uwAccrualBars(accData=data,dateName="Date",trxName=NULL,pTitle="Bars",
              yLab="Months",xLab="Number of Subjects",printBarVals=FALSE,
              interval="y",yLim=NULL,pHoriz=TRUE,pBeside=FALSE,
              linedbars=TRUE,Legend=FALSE,LegendLoc="bottomleft",
              LegendCex=0.7,cex.names=0.9)

uwAccrualBars(accData=data,dateName="Date",trxName=NULL,
              interval="m",yLim=NULL,pHoriz=FALSE,pBeside=FALSE,
              linedbars=FALSE,Legend=TRUE)



cleanEx()
nameEx("uwBar")
mat <- matrix(1:12,nrow=3)
dimnames(mat) <- list(c("A","B","C"),c("D","E","F","G"))

uwBar(mat,pBeside=TRUE,pHoriz=FALSE,lined=FALSE,
      axLim=NULL,yLab=NULL,xLab=NULL,printBarVals=TRUE,
      Legend=TRUE,LegendLoc="topright",LegendCex=0.8,
      mgp.y=c(3,1,0),mgp.x=c(3,1,0),cex.names=1,barNamesLas=1,
      barNamesSeq=1,barNamesAngle=0,digits=1)




cleanEx()
nameEx("uwBarPlot")
TRT <- rep(c("A","B","C"), 30)
AE <-ordered(sample(c("None","Mild","Moderate","Severe"),90,replace=TRUE),
             c("None", "Mild", "Moderate", "Severe"))
data <- data.frame(TRT,AE)

layout(matrix(c(1,1,2,2,3,3,4,4),nrow=2,byrow=TRUE))
uwBarPlot(demoData=data,trxName=NULL,factorName="AE",Legend=TRUE,demoBarPlot=FALSE,pHoriz=TRUE,pBeside=TRUE,
          xLab="Number of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=60,cex.names=0.8,
          lined=FALSE,Percent=FALSE,barNamesLas=1,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topright")

uwBarPlot(demoData=data,trxName="TRT",factorName="AE",Legend=TRUE,demoBarPlot=TRUE,pHoriz=TRUE,
          xLab="Number of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=0,
          lined=FALSE,Percent=FALSE,barNamesLas=0,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topright",pStrWrap=TRUE)

uwBarPlot(demoData=data,trxName="TRT",factorName="AE",Legend=TRUE,demoBarPlot=FALSE,pHoriz=FALSE,
          yLab="Percent of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=0,
          lined=FALSE,Percent=TRUE,barNamesLas=1,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topleft")

uwBarPlot(demoData=data,trxName="TRT",factorName="AE",Legend=TRUE,demoBarPlot=TRUE,pHoriz=FALSE,
          yLab="Percent of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=45,
          lined=TRUE,Percent=TRUE,barNamesLas=1,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topleft")



cleanEx()
nameEx("uwBox")
q()
n
args(uwBarPlot)
pkgname <- "biostatrpts"
source(file.path(R.home("share"), "R", "examples-header.R"))
options(warn = 1)
library('biostatrpts')
uwBarPlot()
uwBarPLot
uwBarPlot
TRT <- rep(c("A","B","C"), 30)
AE <-ordered(sample(c("None","Mild","Moderate","Severe"),90,replace=TRUE),
             c("None", "Mild", "Moderate", "Severe"))
data <- data.frame(TRT,AE)

layout(matrix(c(1,1,2,2,3,3,4,4),nrow=2,byrow=TRUE))
uwBarPlot(demoData=data,trxName=NULL,factorName="AE",Legend=TRUE,demoBarPlot=FALSE,pHoriz=TRUE,pBeside=TRUE,
          xLab="Number of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=60,cex.names=0.8,
          lined=FALSE,Percent=FALSE,barNamesLas=1,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topright")

uwBarPlot(demoData=data,trxName="TRT",factorName="AE",Legend=TRUE,demoBarPlot=TRUE,pHoriz=TRUE,
          xLab="Number of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=0,
          lined=FALSE,Percent=FALSE,barNamesLas=0,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topright",pStrWrap=TRUE)

uwBarPlot(demoData=data,trxName="TRT",factorName="AE",Legend=TRUE,demoBarPlot=FALSE,pHoriz=FALSE,
          yLab="Percent of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=0,
          lined=FALSE,Percent=TRUE,barNamesLas=1,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topleft")

uwBarPlot(demoData=data,trxName="TRT",factorName="AE",Legend=TRUE,demoBarPlot=TRUE,pHoriz=FALSE,
          yLab="Percent of Subjects",pTitle="Adverse Events",digits=1,barNamesAngle=45,
          lined=TRUE,Percent=TRUE,barNamesLas=1,barNamesSeq=1,printPVals=TRUE,pTest="f",pValCex=0.6,
          LatexFileName=NULL,LegendLoc="topleft")



cleanEx()
nameEx("uwBox")
TRT <- c(rep("A",20), rep("B",20), rep("C",20))
metric <- c(rnorm(20,2,1), rnorm(20,3,1), rnorm(20,4,1))

dat <- data.frame(TRT,metric)

uwBox(dat,"TRT","metric")
TRT <- c(rep("A",20), rep("B",20), rep("C",20))
metric <- c(rnorm(20,2,1), rnorm(20,3,1), rnorm(20,4,1))

dat <- data.frame(TRT,metric)

uwBoxPlot(data=dat,
             trxName="TRT", 
             metricName="metric",
             LatexFileName=NULL,
             showTab=FALSE,
             pTitle="Example of uwBoxPlot",
             yLab="Weight of Something (oz)", 
             plotMean=FALSE, pOutliers=FALSE,
             boxWex=0.75,
             Ropen=FALSE,
             printPVals=TRUE,
             pTest="t",
             abbrevN=1,
             pairwise=TRUE,
             trxControl=NULL,
             pExclude=NULL,
             pInclude=list(list(c("A","B"),"C"), list("B","C"),
                      list("A","C")),
             yLim=NULL,
             pStrWrap=FALSE,
             pValCex=0.7,
             LatexCaption=NULL,
             col.just=c("|l|",rep("c",10),"|r","r|"),
             firstCol.name=NULL
            ) 
q()
n
